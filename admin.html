<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Admin Pagina</title>
  <style>
    :root { --btn: #0d6efd; --btn-hover:#0b5ed7; }
    body { font-family: Arial, sans-serif; margin: 20px; }
    header { display: flex; justify-content: space-between; align-items: center; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; }
    .btn { appearance:none; border:none; border-radius:8px; padding:8px 14px; cursor:pointer; background:var(--btn); color:#fff; font-weight:600; }
    .btn:hover { background:var(--btn-hover); }

    /* RECORD LAYOUT â€” no overlap */
    .player-row {
      display: grid;
      grid-template-columns: 1fr auto auto auto;
      align-items: center;
      gap: 8px;
      padding: 6px 0;
      border-bottom: 1px solid #eee;
    }
    .player-name { min-width: 160px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

    /* LOGIN OVERLAY */
    #login-overlay {
      position: fixed; inset: 0; background: rgba(0,0,0,0.6);
      display: flex; justify-content: center; align-items: center;
    }
    #login-box {
      background:#fff; padding:20px; border-radius:12px; box-shadow:0 6px 24px rgba(0,0,0,.25);
      width: min(92vw, 360px);
    }
    #login-box h3 { margin:0 0 10px; }
    .field { display:flex; flex-direction:column; gap:6px; margin:10px 0; }
    .field input { padding:8px 10px; border:1px solid #ddd; border-radius:8px; }
    #error { color:#c1121f; font-size:0.95em; display:none; margin-top:6px; }
    @media (max-width: 520px) {
      .player-row { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>

<!-- Login pop-up -->
<div id="login-overlay" aria-modal="true" role="dialog">
  <form id="login-box" onsubmit="handleLogin(event)">
    <h3>Inloggen</h3>
    <div class="field">
      <label for="username">Gebruikersnaam</label>
      <input id="username" name="username" placeholder="admin" autocomplete="username" required />
    </div>
    <div class="field">
      <label for="password">Wachtwoord</label>
      <input id="password" name="password" type="password" placeholder="wachtwoord" autocomplete="current-password" required />
    </div>
    <button class="btn" type="submit">Inloggen</button>
    <div id="error">Ongeldige gebruikersnaam of wachtwoord</div>
  </form>
</div>

<!-- Admin panel (hidden until login) -->
<div id="admin-panel" style="display:none;">
  <header>
    <h2>Beheerpagina</h2>
    <div style="display:flex; gap:10px;">
      <button class="btn" type="button" onclick="location.href='index.html'">Bekijk Statistieken</button>
      <button class="btn" type="button" onclick="logout()">Uitloggen</button>
    </div>
  </header>

  <section>
    <h3>Wedstrijd registreren</h3>
    <div id="players"></div>
  </section>
</div>

<script>
  // Credentials
  const VALID_USER = "admin";
  // Correct SHA-256 hash for "wuste"
  const VALID_PASS_HASH = "9dd4898618d28024a8605179252f4f4e801e48c95c550861f621384bece314b6";

  // Hash helper
  async function sha256(text) {
    const data = new TextEncoder().encode(text);
    const hashBuffer = await crypto.subtle.digest("SHA-256", data);
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    return hashArray.map(b => b.toString(16).padStart(2, "0")).join("");
  }

  // Handle login (form submit)
  async function handleLogin(e) {
    e.preventDefault();
    const user = document.getElementById("username").value.trim();
    const pass = document.getElementById("password").value;
    const passHash = await sha256(pass);

    if (user === VALID_USER && passHash === VALID_PASS_HASH) {
      document.getElementById("login-overlay").style.display = "none";
      document.getElementById("admin-panel").style.display = "block";
      document.getElementById("error").style.display = "none";
    } else {
      document.getElementById("error").style.display = "block";
    }
  }

  // Logout: show overlay again, clear fields
  function logout() {
    document.getElementById("admin-panel").style.display = "none";
    document.getElementById("login-overlay").style.display = "flex";
    document.getElementById("username").value = "";
    document.getElementById("password").value = "";
    document.getElementById("username").focus();
  }

  // Focus username on load
  window.addEventListener("load", () => {
    document.getElementById("username").focus();
    // (Optional) remember login across refresh:
    // if (sessionStorage.getItem("isAdmin") === "1") { document.getElementById("login-overlay").style.display = "none"; document.getElementById("admin-panel").style.display = "block"; }
  });

  // Demo players (replace with your real data binding if needed)
  const players = ["Speler 1", "Speler 2", "Speler 3", "Speler 4"];
  const playerDiv = document.getElementById("players");
  players.forEach(name => {
    const row = document.createElement("div");
    row.className = "player-row";

    const span = document.createElement("span");
    span.className = "player-name";
    span.textContent = name;
    row.appendChild(span);

    [["Afwezig"], ["Aanwezig"], ["Uitzitten"]].forEach(([label]) => {
      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "btn";
      btn.textContent = label;
      row.appendChild(btn);
    });

    playerDiv.appendChild(row);
  });
</script>

</body>
</html>
